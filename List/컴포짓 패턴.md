# 컴포짓 패턴

# 의도

- 사용자로 하여금 개별 객체와 복합 객체를 모두 동일하게 다룰 수 있도록 하는 패턴
- 트리 구조를 나타내기 좋다

# 동기

그래픽 편집기나 구조도 캡처 시스템 등에서 사용할 수 있다.

→ 사용자가 간단한 그림 구성요소들을 모아서 복잡한 다이어그램을 생성할 수 있게 하기 때문.

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/c4c3f91c-ed00-499a-b932-9844ee4edfa0/58f0c7f5-e4f8-4443-9b76-c8e7433b8da6/Untitled.png)

어떻게 구현하면 될까?

1. 하나의 추상화 클래스를 정의한다.
    1. 아래 예제에서는 Graphic
        1. Draw()
        2. Add()
        3. Remove()
        4. GetChild()
2. 그래픽의 서브클래스에서 연산을 구현한다.
    1. 이들 서브클래스는 구성 요소를 다루는데 필요한 연산은 구현 X
    2. Draw() 연산만 구현한다.
3. Graphic 객체와 집합 관계인 클래스를 만들어서 사용한다.
    1. 이때 Picture 클래스도 Draw() 연산을 구현한다.
    2. 이는 여러 그림 요소가 포함된 복합 그림도 실제로 그려지는 기본 행동을 제공하기 때문

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/c4c3f91c-ed00-499a-b932-9844ee4edfa0/8c650eed-a523-4ecc-a469-8eef1cb53421/Untitled.png)

MS 파워포인트 그룹 기능을 생각하면 쉽다.

# 활용성

- 부분-전체의 객체 계통을 표현하고 싶을때
- 사용자가 객체의 합성으로 생긴 복합 객체와 개개의 객체 사이의 차이를 알지 않고도 자기 일을 할 수 있도록 만들고 싶을 때.
    - 사용자는 복합 구조의 모든 객체를 똑같이 취급하게 된다
        - 단일객체, 복합 객체를 동일하게 취급하게 된다.
            - ’복합객체: 폴더‘, ’단일객체: 파일‘로 대응시켜서 생각해보자.
            - 사용자는 폴더나 파일을 동일한 ‘컴포넌트’로 보고 동일한 ‘방식’으로 다룰 수 있다.
                - 즉 동일한 인터페이스로 다룰 수 있다는 것!
                - 예제: ‘크기를 계산한다’라는 동작
                    - 파일: 그 파일의 크기를 반환
                    - 폴더: 폴더안의 모든 파일과 서브폴더들의 크기를 합한 값을 반환
    - 자세히 보기
        - 간단한 예로 파일과 폴더 시스템을 생각해볼 수 있습니다. 파일 시스템에서 폴더는 여러 파일이나 다른 폴더를 포함할 수 있습니다. 여기서 개별 파일은 ‘단일 객체(Leaf)’, 폴더는 ’복합 객체(Composite)’입니다. 복합체 패턴을 사용하면, 사용자는 폴더나 파일을 동일한 ‘컴포넌트’로 보고 동일한 방식으로 다룰 수 있습니다. 예를 들어, ‘크기를 계산한다’라는 동작은 파일에 대해서는 그 파일의 크기를 반환하지만, 폴더에 대해서는 폴더 안의 모든 파일과 서브폴더들의 크기를 합한 값을 반환합니다. 이렇게 복합체 패턴을 사용하면, 클라이언트 코드는 내부 구조(단일 객체인지 복합 객체인지)에 신경 쓰지 않고, 모든 객체를 동일한 인터페이스로 다룰 수 있습니다. 이는 코드의 유연성을 높이고, 변경에 더 강한 설계를 가능하게 합니다.

# 구조

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/c4c3f91c-ed00-499a-b932-9844ee4edfa0/bdeafe48-1f87-457e-8194-5e32de449bd0/Untitled.png)

전형적인 Composite 객체 구조는 다음과 같다.

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/c4c3f91c-ed00-499a-b932-9844ee4edfa0/36f88227-2250-4d2e-b816-6d82acd13a08/Untitled.png)

# 참여자

- Component
    - 집합 관계에 정의될 모든 객체에 대한 인터페이스 정의
    - 
- Leaf
    - 가장 말단이 되는 객체
- Composite
    - 복합하는 요소들 저장
        - 그룹을 저장한다는 의미인듯
- Client

# 결과

# 구현

# 예제 코드

# 관련 패턴

- 장식자 패턴
- 플라이급 패턴
- 반복자 패턴
- 방문자 패턴
